<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="book-name" content="OS-Matcher"/>
  <meta name="book-version" content=""/>
  <meta name="book-release" content=""/>
  <meta name="book-type" content="Manual"/>

  
  <title>Routing &mdash; OS-Matcher  documentation</title>
  

  
  

  

  

  

  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css"/>
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/collapsible-lists/css/tree_view.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/table_styling.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/jquery-ui/jquery-ui.min.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/css/t3more.css" type="text/css"/>
  

  
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css"/>
  
    <link rel="stylesheet" href="../../../_static/css/style.css" type="text/css"/>
  
        <link rel="index" title="Index" href="../../../genindex.html"/>
        <link rel="search" title="Search" href="../../../search.html"/>
    <link rel="top" title="OS-Matcher  documentation" href="#"/>
        <link rel="up" title="Overview" href="Index.html"/>
        <link rel="next" title="Matching" href="Matching.html"/>
        <link rel="prev" title="Overview" href="Index.html"/> 
  <script src="../../../_static/js/modernizr.min.js"></script>
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        <ul class="sidebartop">

          <li class="docsite">
            <a href="https://docs.typo3.org"><img src="../../../_static/img/typo3-documentation.png" class="logo"/></a>
          </li><li class="project">
            <a href="../../../index.html">
              OS-Matcher</a>
          </li>
          <li class="nolink search"><div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search this project" id="searchinput"/>
    <input type="hidden" name="check_keywords" value="yes"/>
    <input type="hidden" name="area" value="default"/>
  </form>
</div>
</li></ul>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <p class="caption" role="heading"><span class="caption-text">USAGE</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Usage/Execution.html">Execute example matcher</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Execution.html#preparation">Preparation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Usage/Execution.html#database">Database</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Usage/Execution.html#track">Track</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Usage/Execution.html#output">Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Execution.html#execution">Execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Usage/Execution.html#execution-with-docker">Execution with Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Usage/Execution.html#execution-with-built-binary">Execution with built binary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Usage/Build.html">Build</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Build.html#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Build.html#getting-the-code">Getting the code</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Build.html#provision-conan-packages">Provision Conan packages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Build.html#building-for-docker">Building for Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Usage/Build.html#building-os-matcher">Building <em>OS-Matcher</em></a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">OPERATIONAL DATA</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../OperationalData/DataSelection/Index.html">Data selection</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../OperationalData/DataSelection/DataStructures.html">Data structures</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../OperationalData/DataSelection/DataStructures.html#processed-data">Processed data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../OperationalData/DataSelection/DataStructures.html#example-router">Example: Router</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../OperationalData/DataSelection/DataStructures.html#type-listing">Type listing</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html">Input data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#data-overview">Data overview</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#track">Track</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#street-map">Street Map</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#input-filter">Input filter</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#id1">Track</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../OperationalData/DataSelection/InputData.html#id2">Street Map</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">TRACK POINT PROJECTION</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../TrackPointProjection/Overview.html">Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../TrackPointProjection/Overview.html#candidate-search">Candidate search</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">MATCHING</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="Index.html">Overview</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Routing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#routing-routing">Routing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clustering">Clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="#final-evaluation">Final Evaluation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Matching.html">Matching</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Algorithms/Index.html">Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/6-DijkstraRouter.html">Dijkstra router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/6-DijkstraRouter.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html">Directed candidate router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html#examples">Examples</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html#single-edge-simple-case">Single edge, simple case</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html#other-cases">Other cases</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html#identical-nodes">Identical nodes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../Algorithms/5-DirectedCandidateRouter.html#different-nodes">Different nodes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/4-SamplingPointRouter.html">Sampling point router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/4-SamplingPointRouter.html#possible-routes-calculation">1. Possible routes calculation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../Algorithms/4-SamplingPointRouter.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/4-SamplingPointRouter.html#routes-clustering">2. Routes clustering</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/4-SamplingPointRouter.html#route-selection">3. Route selection</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/3-BacktrackRouter.html">Backtrack router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/3-BacktrackRouter.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/2-SkipRouter.html">Skip router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/2-SkipRouter.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../Algorithms/1-PiecewiseRouter.html">Piecewise router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../Algorithms/1-PiecewiseRouter.html#example">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">DETAILS</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Details/Matcher/Index.html">Matcher</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Details/Matcher/SamplingPointFinder.html">SamplingPointFinder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/SamplingPointFinder.html#input">Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/SamplingPointFinder.html#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/SamplingPointFinder.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Details/Matcher/GraphBuilder.html">GraphBuilder</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/GraphBuilder.html#input">Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/GraphBuilder.html#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/GraphBuilder.html#configuration">Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../Details/Matcher/Router.html">Router</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/Router.html#input">Input</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/Router.html#output">Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../Details/Matcher/Router.html#configuration">Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../_api/library_root.html">API documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../_api/library_root.html#class-hierarchy">Class Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_api/library_root.html#file-hierarchy">File Hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../_api/library_root.html#full-api">Full API</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#namespaces">Namespaces</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#classes-and-structs">Classes and Structs</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#enums">Enums</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#functions">Functions</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#variables">Variables</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#defines">Defines</a>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../_api/library_root.html#typedefs">Typedefs</a>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Addendum</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../Glossary.html">Glossary</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Glossary.html#general">General</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Glossary.html#operational-data-details">Operational data details</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../Specifications.html">Specifications</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../Specifications.html#general">General</a></li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">OS-Matcher</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
          <li><a href="Index.html">Overview</a> &raquo;</li>
    <li>Routing</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/content/Matching/Overview/Routing.rst.txt" rel="nofollow">
                <span class="fa fa-binoculars"/>&#32;View page source
            </a>
      </li>
  </ul>
  
    <hr class="before-stealth-btn clear-both"/>
    
      <a href="Matching.html" class="stealth-btn float-right" title="Accesskey Alt(+Shift)+n">
          <span class="stealth-btn-text">Next</span>
          <span class="fa fa-arrow-circle-right"/>
      </a>
    
    
      <a href="Index.html" class="stealth-btn" title="Accesskey Alt(+Shift)+p">
          <span class="fa fa-arrow-circle-left"/>
          <span class="stealth-btn-text">Previous</span>
      </a>
    

</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody" class="toBeIndexed">
            
  <div class="section" id="routing">
<span id="id1"/><h1>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h1>
<p>Routing is defined as a threefold-function <span class="math notranslate nohighlight">\(R(A,B,M) = r\)</span> where <span class="math notranslate nohighlight">\(M\)</span> is the street map and <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span>
are start and endpoint of the street map. <span class="math notranslate nohighlight">\(R\)</span> returns a <a class="reference internal" href="../../Glossary.html#term-valid-navigation-route"><span class="xref std std-term">valid navigation route</span></a> from <span class="math notranslate nohighlight">\(A\)</span> to <span class="math notranslate nohighlight">\(B\)</span> on the street map <span class="math notranslate nohighlight">\(M\)</span>.</p>
<p>The street map <span class="math notranslate nohighlight">\(M\)</span> in use is the <a class="reference external" href="https://www.openstreetmap.org">OSM map</a>.
Start and endpoint <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span> are GPS locations, which may not necessarily lay on the street map.</p>
<p>The routing algorithm falls apart into three parts:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#routing-routing"><span class="std std-ref">Routing</span></a></p></li>
<li><p><a class="reference internal" href="#clustering">Clustering</a></p></li>
<li><p><a class="reference internal" href="#final-evaluation">Final Evaluation</a></p></li>
</ul>
<div class="section" id="routing-routing">
<span id="id2"/><h2>Routing<a class="headerlink" href="#routing-routing" title="Permalink to this headline">¶</a></h2>
<p>After the candidates are found (see <a class="reference internal" href="../../TrackPointProjection/Overview.html#routing-candidate-search"><span class="std std-ref">Candidate search</span></a>), we have a list of pairs <span class="math notranslate nohighlight">\(P = \{ (s,t) | s \in C^A, t \in C^B \}\)</span>.</p>
<p>The street map <span class="math notranslate nohighlight">\(M\)</span> is in its core a graph of nodes and edges (<span class="math notranslate nohighlight">\(G(V,N)\)</span>),
the candidates are points on the edges and therefore not part of the graph.
To overcome that, the nodes of the edge a candidate is placed on, become the first selected nodes in the routing.</p>
<div class="figure align-default" id="routing-1directions">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-1Directions.drawio.png"><img alt="Candidates on one way streets" class="with-shadow" src="../../../_images/Routing-1Directions.drawio.png" style="width: 704.5px; height: 498.5px;"/></a>
<p class="caption"><span class="caption-number">Fig. 7 </span><span class="caption-text">Candidates on one way streets</span><a class="headerlink" href="#routing-1directions" title="Permalink to this image">¶</a></p>
</div>
<p>Notice, if the used street map supports information on travel directions,
here already a filtering step is done by only considering one node of the edge aka the street segment.</p>
<p>For each combination of the one or two possible first nodes of <span class="math notranslate nohighlight">\(A\)</span> and <span class="math notranslate nohighlight">\(B\)</span>
now a routing is done on the graph of the street map using a routing algorithm.
The default algorithm in <em>OS-Matcher</em> is Dijkstra’s algorithm with the geographical length of an edge as its cost function.</p>
<p>So we end up with a list of routes, one for each pair <span class="math notranslate nohighlight">\((s,t)\)</span> and for each combination of
possible nodes (<span class="math notranslate nohighlight">\(n_i^s\)</span> and <span class="math notranslate nohighlight">\(n_j^t\)</span>) for the edges (<span class="math notranslate nohighlight">\(e_s\)</span> and <span class="math notranslate nohighlight">\(e_t\)</span>)
<span class="math notranslate nohighlight">\(s\)</span> and <span class="math notranslate nohighlight">\(t\)</span> are placed on.</p>
<p>Since all the routes are starting from candidates of the same track point <span class="math notranslate nohighlight">\(A\)</span> and likewise are ending on candidates of the same track point <span class="math notranslate nohighlight">\(B\)</span>,
often the resulting routes are very similar.</p>
<div class="figure align-default" id="routing-2similar">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-2Similar.drawio.png"><img alt="Basically similar routes" class="with-shadow" src="../../../_images/Routing-2Similar.drawio.png" style="width: 1042.0px; height: 432.0px;"/></a>
<p class="caption"><span class="caption-number">Fig. 8 </span><span class="caption-text">Basically similar routes</span><a class="headerlink" href="#routing-2similar" title="Permalink to this image">¶</a></p>
</div>
<p>In <a class="reference internal" href="#routing-2similar"><span class="std std-numref">Fig. 8</span></a> we see two <em>basically similar</em> routes like that.</p>
<p>Contrary, in <a class="reference internal" href="#routing-3different"><span class="std std-numref">Fig. 9</span></a> we see two <em>basically different</em> routes.</p>
<div class="figure align-default" id="routing-3different">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-3Different.drawio.png"><img alt="Basically different routes." class="with-shadow" src="../../../_images/Routing-3Different.drawio.png" style="width: 1042.0px; height: 432.0px;"/></a>
<p class="caption"><span class="caption-number">Fig. 9 </span><span class="caption-text">Basically different routes.</span><a class="headerlink" href="#routing-3different" title="Permalink to this image">¶</a></p>
</div>
<p>When very similar and very different routes are likewise found for the same start and end points, as we see in the following example,
mathematically justifying how to choose the most realistic route is very difficult:</p>
<div class="figure align-default" id="routing-clusteringmotivation">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-ClusteringMotivation.drawio.png"><img alt="Finding the most realistic route" class="with-shadow" src="../../../_images/Routing-ClusteringMotivation.drawio.png" style="width: 782.0px; height: 446.0px;"/></a>
<p class="caption"><span class="caption-number">Fig. 10 </span><span class="caption-text">Finding the most realistic route</span><a class="headerlink" href="#routing-clusteringmotivation" title="Permalink to this image">¶</a></p>
</div>
<p>In <a class="reference internal" href="#routing-clusteringmotivation"><span class="std std-numref">Fig. 10</span></a>, <span class="math notranslate nohighlight">\(C_1^A\)</span> is the best candidate and <span class="math notranslate nohighlight">\(C_3^A\)</span> produces the shortest route, but both are not correct - <span class="math notranslate nohighlight">\(C_2^A\)</span> leads to the actual route.</p>
<p>To solve the problem, the routes are getting clustered, where each cluster represents a set of <em>basically similar</em> routes.</p>
</div>
<div class="section" id="clustering">
<span id="routing-clustering"/><h2>Clustering<a class="headerlink" href="#clustering" title="Permalink to this headline">¶</a></h2>
<p>As motivated above, a cluster is a set of routes which are representing <em>basically similar</em> routes. All routes in a cluster are ranked by a comparison
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">class</span> <span class="pre">BestSimilarRouteComparator</span></code>,
which compares the candidate’s rank according to the system described in <a class="reference internal" href="../../TrackPointProjection/Overview.html#routing-candidate-search"><span class="std std-ref">Candidate search</span></a>.</p>
<p>Any new route which shall be placed into a cluster is compared to the highest ranked member of that cluster, the <em>role model</em> of that cluster, using a similarity function.
The <code class="xref cpp cpp-func docutils literal notranslate"><span class="pre">function</span> <span class="pre">isSimilar()</span></code>
compares two routes <span class="math notranslate nohighlight">\(r_0\)</span> and <span class="math notranslate nohighlight">\(r_1\)</span> against several criteria. Only when all of them are met,
the route will be added to the cluster.</p>
<p>The criteria are:</p>
<ul class="simple">
<li><p><strong>max length difference</strong>, the outermost two routes may differ in length (it is recommended to set this value to <span class="math notranslate nohighlight">\(4 \cdot candidate\ search\ radius\)</span>)</p></li>
<li><p><strong>the source node of one is contained by the other</strong>, <span class="math notranslate nohighlight">\(n^s_{r_1} \in r_0\)</span> or <span class="math notranslate nohighlight">\(n^s_{r_0} \in r_1\)</span></p></li>
<li><p><strong>the target node of one is contained by the other</strong>, <span class="math notranslate nohighlight">\(n^t_{r_1} \in r_0\)</span> or <span class="math notranslate nohighlight">\(n^t_{r_0} \in r_1\)</span></p></li>
<li><p><strong>source and target node are not visited twice</strong></p></li>
</ul>
<p>Note that the second and third criteria do not need to be fulfilled by both routes, only by one.</p>
<div class="figure align-default" id="routing-4similaritywide">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-4SimilarityWide.drawio.png"><img alt="Similarity criteria" class="with-shadow" src="../../../_images/Routing-4SimilarityWide.drawio.png" style="width: 1504.0px; height: 1041.0px;"/></a>
<p class="caption"><span class="caption-number">Fig. 11 </span><span class="caption-text">Similarity criteria</span><a class="headerlink" href="#routing-4similaritywide" title="Permalink to this image">¶</a></p>
</div>
<p>Let’s recap the example illustrated by <a class="reference internal" href="#routing-clusteringmotivation"><span class="std std-numref">Fig. 10</span></a>. The track point <span class="math notranslate nohighlight">\(A\)</span> originates indeed from the roundabout.
But due to the drift of <span class="math notranslate nohighlight">\(A\)</span> (may be induced due to data noise or inaccurate map data),
the best candidate sits on a one-way street to the south (<span class="math notranslate nohighlight">\(C_1^A\)</span>). The best (shortest) route however starts at the most unlikely candidate (<span class="math notranslate nohighlight">\(C_3^A\)</span>),
while the actual route starts at (<span class="math notranslate nohighlight">\(C_2^A\)</span>).</p>
<p>Clustering is a way to overcome those and similar situations by filtering out unlikely routes
which are just considered because of its candidate rank.
Within a cluster, however, the candidate’s rank assures that we get the most accurate starting point from all the <em>basically similar</em> routes.</p>
<div class="figure align-default" id="routing-5clustering">
<a class="with-shadow reference internal image-reference" href="../../../_images/Routing-5Clustering.drawio.png"><img alt="Clustering" class="with-shadow" src="../../../_images/Routing-5Clustering.drawio.png" style="width: 782.0px; height: 411.0px;"/></a>
<p class="caption"><span class="caption-number">Fig. 12 </span><span class="caption-text">Clustering</span><a class="headerlink" href="#routing-5clustering" title="Permalink to this image">¶</a></p>
</div>
<p>Now we have a set of clusters, each having a <em>role model</em>.</p>
</div>
<div class="section" id="final-evaluation">
<span id="routing-final-evaluation"/><h2>Final Evaluation<a class="headerlink" href="#final-evaluation" title="Permalink to this headline">¶</a></h2>
<p>From each cluster the role model is chosen and all of those role models are compared using the
<code class="xref cpp cpp-class docutils literal notranslate"><span class="pre">class</span> <span class="pre">BestRouteComparator</span></code>.
The Comparator has three criteria:</p>
<ul class="simple">
<li><p><strong>length</strong>, which selects the shortest route</p></li>
<li><p><strong>cost</strong>, which selects the route with the lowest routing costs</p></li>
<li><p><strong>number of points</strong>, which selects the route with the least number of nodes</p></li>
</ul>
<p>The comparator comes in two flavors of criteria preference:</p>
<ul class="simple">
<li><p><strong>cheapest</strong>, criteria order <span class="math notranslate nohighlight">\(cost &gt; length &gt; number\ of\ points\)</span></p></li>
<li><p><strong>shortest</strong>, criteria order <span class="math notranslate nohighlight">\(length &gt; cost &gt; number\ of\ points\)</span></p></li>
</ul>
<p>The best route according to this comparison is then the result of our routing <span class="math notranslate nohighlight">\(R(A,B,M) = r\)</span>.</p>
</div>
</div>


           </div><!-- /.toBeIndexed -->
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Matching.html" class="btn btn-neutral float-right" title="Accesskey Alt(+Shift)+n" accesskey="n">Next <span class="fa fa-arrow-circle-right"/></a>
      
      
        <a href="Index.html" class="btn btn-neutral" title="Accesskey Alt(+Shift)+p" accesskey="p"><span class="fa fa-arrow-circle-left"/> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo" class="contentinfo">
      <p class="show_source">
        <a href="../../../_sources/content/Matching/Overview/Routing.rst.txt" rel="nofollow">
          <span class="fa fa-binoculars"/>&#32;View page source
        </a>
      </p>
      <p class="show_copyright">
            &copy; Copyright 2018, Ambrosys GmbH
      </p>
      <p class="show_sphinx">
        Built with <a href="http://sphinx-doc.org/" target="_blank">Sphinx</a> and
        <a href="https://github.com/TYPO3-Documentation/t3SphinxThemeRtd" target="_blank">t3SphinxThemeRtd.</a>
        Report theme issues <a href="https://github.com/TYPO3-Documentation/t3SphinxThemeRtd/issues" target="_blank">here.</a>
      </p>
      <p class="show_legalinfo">
        <a href="https://typo3.org/legal-info/" rel="nofollow">
          <span class="fa fa-legal"/>&#32;Legal Info
        </a>
      </p>




  </div>

</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/collapsible-lists/js/CollapsibleLists.compressed.js"></script>
      <script type="text/javascript" src="../../../_static/collapsible-lists/js/apply-collapsible-lists.js"></script>
      <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script type="text/javascript" src="../../../_static/jquery-ui/jquery-ui.min.js"></script>
      <script type="text/javascript" src="../../../_static/js/theme.js"></script>
      <script type="text/javascript" src="../../../_static/js/t3autocomplete.js"></script>

  

  
   
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   <script type="text/javascript" id="idPiwikScriptPlaceholder"></script></body>
</html>